Virtual Machine
===============

This section describes how to get your virtual machine environment up and running on
your Windows or Mac OS X laptop or Desktop.

Before proceeding ensure that you have met the prerequisites listed [here](prerequisites.md)

### Downloading the Contents

The virtual machine contents are downloaded from a GitHub repository.

#### Cloning

Use the git command line tool in a bash shell to clone the contents of the virtual machine
from the GitHub Repository. Pay attention and make note of the directory location you are currently in when executing the command below.

```
$ git clone https://github.com/boundary/tsi-lab
```

### Creating and Starting the Virtual Machine

Interaction with the APIs requires the following details:

- E-mail - The e-mail associated with your TrueSight Intelligence account.
- API Token - The token generated by the system for authenticating a call to the API
- API Host - The host which the API endpoint resides
- Application ID - Your application name used for all of the labs  (any name you want)

_NOTE_: To create the virtual machine you need to use a bash shell, or Windows Command prompt.

1. Change to directory of the downloaded and extracted lab contents. example:
```
$ cd tsi-lab
```
2. From the bash shell (Terminal in OSX) or Windows Command prompt.
With the TrueSight Intelligence information above issue the command below in a bash shell,
or Windows command prompt. This will create and bring up the virtual machine.
```
$ ./start

sample output:
Enter your E-mail: david.gwartney@bmc.com
Enter your API token: deadbeef
Enter your Application Id: your app id
verifying...ok

Creating virtual machine with the following:
    e-mail: david.gwartney@bmc.com
    api token: deadbeef
    application id: BigDog
..........done
done
```

### Checking Credentials of your Virtual Machine

Run the following command immediately after the command above to verify the settings took.
```
$ creds

Sample Output:
TSP_EMAIL=rknaub@gmail.com
TSP_API_HOST=api.truesight-staging.bmc.com
TSP_API_TOKEN=fbecec7a-b0f7-40c4-a4cb-ec09b3b6b7cb
```


### Logging into the Virtual Machine
After your VM is created login to your VM by using the command below.
```
$ vagrant ssh
```

### Change directory to your labs directory
After you login to your VM CD to your labs directory by using the command below.
```
$ cd labs
```
Click Next (upper right) when completed.

### Stopping a Virtual Machine

Run the following command before shutting down you laptop/desktop.
```
$ vagrant halt
```

### Starting a Virtual Machine

Run the following command to bring up your VM after being halted.
```
$ vagrant up
```

### Destroying a Virtual Machine
After the labs are done you can remove the virtual machine if you like.
```
$ vagrant destroy
```
